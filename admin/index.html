<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <title>Painel de Administração</title>
  <meta name="robots" content="noindex, nofollow" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Evita cache do painel (às vezes o navegador mantém config antigo) -->
  <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
</head>
<body>
  <!-- Netlify Identity (login) -->
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

  <!-- Redireciona para /admin após login -->
  <script>
    if (window.netlifyIdentity) {
      window.netlifyIdentity.on("init", (user) => {
        if (!user) {
          window.netlifyIdentity.on("login", () => {
            document.location.href = "/admin/";
          });
        }
      });
    }
  </script>

  <!-- Decap CMS -->
  <script src="https://unpkg.com/decap-cms@3.0.0/dist/decap-cms.js"></script>

  <!-- Idioma e pequenos ajustes -->
  <script>
    // força interface do CMS para PT-BR quando o CMS estiver disponível
    (function ensurePtLocale() {
      if (window.CMS && CMS.registerLocale) {
        try { CMS.registerLocale('pt'); } catch(e) {}
      } else {
        // tenta novamente logo após carregar
        document.addEventListener('DOMContentLoaded', function () {
          if (window.CMS && CMS.registerLocale) {
            try { CMS.registerLocale('pt'); } catch(e) {}
          }
        });
      }
    })();
  </script>
</body>
</html>
